<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="cart_lines" inherit_id="website_sale.cart_lines">
        <xpath expr="//td[hasclass('td-img') and @align='center']" position="replace">
            <t t-if="line.product_id.overlay_product_id">
                <td align="center" t-if="line.product_id.product_tmpl_id" class='td-img'>
                    <span>
                        <img t-att-src="line.product_id.overlay_product_id._preview_image_url()"
                             class="img o_image_64_max rounded" t-att-alt="line.name_short"/>
                    </span>
                </td>
            </t>
            <t t-else="">
                <td align="center" class='td-img'>
                    <span t-if="line._is_not_sellable_line() and line.product_id.image_128">
                        <img t-att-src="image_data_uri(line.product_id.image_128)"
                             class="img o_image_64_max rounded"
                             t-att-alt="line.name_short"/>
                    </span>
                    <span t-else=""
                          t-field="line.product_id.image_128"
                          t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded o_image_64_max'}"
                    />
                </td>
            </t>
        </xpath>
        <xpath expr="//span[@t-field='line.price_reduce_taxexcl']" position="attributes">
            <attribute name="t-field">line.price_subtotal</attribute>
        </xpath>
        <xpath expr="//span[@t-field='line.price_reduce_taxinc']" position="attributes">
            <attribute name="t-field">line.price_total</attribute>
        </xpath>
        <xpath expr="//table[@id='cart_products']/thead//th[hasclass('td-img')]" position="after">
            <th align="center">Hotel</th>
        </xpath>
        <xpath expr="//td[hasclass('td-product_name')]" position="before">
            <td align="center">
                <div>
                    <t t-esc="line.delivery_partner_id.name"/>
                </div>
            </td>
            <td align="center">
                <div data-owl-widget="DeliveryAddressCartLine" t-att-data-sol-data-props="line.get_delivery_data()"></div>
            </td>
        </xpath>
    </template>

    <template id="s_add_to_cart_options" inherit_id="website.snippet_options">
        <xpath expr="." position="inside">
            <div data-js="AddToCart"
                 data-selector=".s_add_to_cart">
                <we-row>
                    <we-many2one string="Product"
                                 data-model="product.template"
                                 data-set-product-template=""
                                 data-name="product_template_picker_opt"
                                 data-no-preview="true"
                                 data-domain='[["is_published", "=", true], ["sale_ok", "=", true]]'
                    />
                    <we-button data-name="product_template_reset_opt"
                               class="reset-product-picker align-self-end fa fa-fw fa-times">
                    </we-button>
                </we-row>
                <we-row>
                    <we-many2one-default-message string="Variant" class="o_we_sublevel_1"
                                                 data-model="product.product"
                                                 data-set-product-variant=""
                                                 data-name="product_variant_picker_opt"
                                                 data-no-preview="true"
                                                 data-default-message="Visitor's Choice"
                    />
                    <we-button data-name="product_variant_reset_opt"
                               class="reset-variant-picker align-self-end fa fa-fw fa-times">
                    </we-button>
                </we-row>
                <we-select data-name="action_picker_opt" string="Action" data-no-preview="true">
                    <we-button data-set-action="add_to_cart">Add to Cart</we-button>
                    <we-button data-set-action="buy_now">Buy Now</we-button>
                </we-select>
            </div>
        </xpath>
    </template>

    <template id="cart_summary" inherit_id="website_sale.cart_summary">
        <xpath expr="//td[hasclass('td-img') and hasclass('text-center')]" position="replace">
            <t t-if="line.product_id.overlay_product_id">
                <td class='td-img text-center' t-if="line.product_id.product_tmpl_id">
                    <span>
                        <img t-att-src="line.product_id.overlay_product_id._preview_image_url()"
                             class="img o_image_64_max rounded" t-att-alt="line.name_short"/>
                    </span>
                </td>
            </t>
            <t t-else="">
                <td class='td-img text-center'>
                    <span t-if="line._is_not_sellable_line() and line.product_id.image_128">
                        <img t-att-src="image_data_uri(line.product_id.image_128)" class="img o_image_64_max rounded"
                             t-att-alt="line.name_short"/>
                    </span>
                    <span t-else=""
                          t-field="line.product_id.image_128"
                          t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded o_image_64_max'}"
                    />
                </td>
            </t>
        </xpath>
        <xpath expr="//span[@t-field='line.price_reduce_taxexcl']" position="attributes">
            <attribute name="t-field">line.price_subtotal</attribute>
        </xpath>
        <xpath expr="//span[@t-field='line.price_reduce_taxinc']" position="attributes">
            <attribute name="t-field">line.price_total</attribute>
        </xpath>
    </template>

    <template id="cart_line_product_link" inherit_id="website_sale.cart_line_product_link">
        <xpath expr="//a" position="attributes">
            <attribute name="t-att-href">line.product_id.url</attribute>
        </xpath>
    </template>

</odoo>
