<?xml version="1.0" encoding="UTF-8"?>
<templates>

    <t t-name="product_overlay_editor" owl="1">
        <div class="product_overlay_editor">
            <div class="product_overlay_editor_positions">
                <t t-foreach="Object.values(store.otPage.overlayPositions)" t-as="position"
                   t-key="position.id">
                    <div t-att-class="{ 'product_overlay_editor_position_hide': state.selectedOverlayPositionId !== position.id }">
                        <ProductOverlayPositionComponent overlayPosition="position"/>
                    </div>
                </t>
            </div>
            <div class="product_overlay_editor_position_list"
                 t-attf-style="margin-left: {{store.otPage.hasOverlayProductId ? 0 : 45}}px;">
                <t t-foreach="overlayPositionSwitcherList" t-as="position"
                   t-key="position.id">
                    <div class="product_overlay_editor_position_list_item"
                         t-att-class="{ 'product_overlay_editor_position_list_item_selected': state.selectedOverlayPositionId === position.id }"
                         t-on-click="() => this.onClickSelectOverlayPosition(position.id)">
                        <img t-att-src="position.previewImageSrc"/>
                        <span>
                            <t t-esc="position.name"/>
                        </span>
                    </div>
                </t>
            </div>
        </div>
    </t>

    <t t-name="product_overlay_position" owl="1">
        <div class="product_overlay_position_editor">
            <div t-if="!store.otPage.hasOverlayProductId || store.otPage.editMode" class="product_overlay_position_editor_tools">
                <label t-att-class="{ 'product_overlay_disabled': !state.selectedAreaIndex }"
                       t-attf-for="upload_area_image_{{props.overlayPosition.id}}"
                       title="Upload image">
                    <i class="fa fa-upload"/>
                </label>
                <input type="file" t-att-accept="acceptFileExtensionsForAreas"
                       t-attf-id="upload_area_image_{{props.overlayPosition.id}}"
                       t-on-change="onChangeUploadImage"
                       t-ref="image_upload_ref"/>
                <button class="product_overlay_position_remove_active_obj"
                        t-att-class="{ 'product_overlay_disabled': !state.selectedAreaIndex }"
                        t-on-click="onClickRemoveActiveObject"
                        title="Remove active object"/>
                <button t-att-class="{ 'product_overlay_disabled': !state.selectedAreaIndex }"
                        t-on-click="onClickRemoveAllObjects"
                        title="Remove all objects">
                    <i class="fa fa-close"/>
                </button>
            </div>
            <div class="product_overlay_position_container">
                <div class="product_overlay_position">
                    <img t-att-src="state.backgroundImage.src" t-ref="image_ref"/>
                    <div class="product_overlay_position_areas_container" t-ref="canvas_container_ref"/>
                </div>
            </div>
        </div>
    </t>

</templates>
